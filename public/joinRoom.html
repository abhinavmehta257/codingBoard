<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Coding Room</title>
    <meta name="viewport" content="width=device-width, inital-scale=1, user-scalable=no">
    <link rel="stylesheet" href="/css/styles.css">
  </head>
  <body class="centered-form">
    <div class="centered-form__form">
      <form action="/codingboard">
        <div class="form-field"><h3>Join Room</h3></div>
        <div class="form-field">
          <label>Display name</label>
          <input type="text" name="name" maxlength="15" autofocus>
        </div>
        <div class="form-field">
          <label>Room Id</label>
          <input type="text" name="roomId" autofocus>
        </div>
        <div class="form-field">
          <label>Language</label>
          <select id="select-language" class="ui dropdown" name="lang">
            <option value="46" mode="shell">Bash (5.0.0)</option>
            <option value="75" mode="c">C (Clang 7.0.1)</option>
            <option value="1013" mode="c">C (Clang 9.0.1)</option>
            <option value="1001" mode="c">C (Clang 10.0.1)</option>
            <option value="48" mode="c">C (GCC 7.4.0)</option>
            <option value="49" mode="c">C (GCC 8.3.0)</option>
            <option value="51" mode="csharp">C# (Mono 6.6.0.161)</option>
            <option value="1017" mode="csharp">C# (Mono 6.10.0.104)</option>
            <option value="1016" mode="csharp">C# (.NET Core SDK 3.1.302)</option>
            <option value="1018" mode="csharp">C# Test (.NET Core SDK 3.1.302, NUnit 3.12.0)</option>
            <option value="76" mode="cpp">C++ (Clang 7.0.1)</option>
            <option value="1014" mode="cpp">C++ (Clang 9.0.1)</option>
            <option value="1002" mode="cpp">C++ (Clang 10.0.1)</option>
            <option value="52" mode="cpp">C++ (GCC 7.4.0)</option>
            <option value="53" mode="cpp">C++ (GCC 8.3.0)</option>
            <option value="1015" mode="cpp">C++ Test (Clang 10.0.1, Google Test 1.8.1)</option>
            <option value="1012" mode="cpp">C++ Test (GCC 8.4.0, Google Test 1.8.1)</option>
            <option value="86" mode="clojure">Clojure (1.10.1)</option>
            <option value="44" mode="plaintext">Executable</option>
            <option value="87" mode="fsharp">F# (.NET Core SDK 3.1.202)</option>
            <option value="1019" mode="fsharp">F# (.NET Core SDK 3.1.302)</option>
            <option value="60" mode="go">Go (1.13.5)</option>
            <option value="62" mode="java">Java (OpenJDK 13.0.1)</option>
            <option value="1004" mode="java">Java (OpenJDK 14.0.1)</option>
            <option value="1005" mode="java">Java Test (OpenJDK 14.0.1, JUnit Platform Console Standalone 1.6.2)</option>
            <option value="63" mode="javascript">JavaScript (Node.js 12.14.0)</option>
            <option value="78" mode="kotlin">Kotlin (1.3.70)</option>
            <option value="64" mode="lua">Lua (5.3.5)</option>
            <option value="1006" mode="c">MPI (OpenRTE 3.1.3) with C (GCC 8.3.0)</option>
            <option value="1007" mode="cpp">MPI (OpenRTE 3.1.3) with C++ (GCC 8.3.0)</option>
            <option value="1008" mode="python">MPI (OpenRTE 3.1.3) with Python (3.7.3)</option>
            <option value="79" mode="objective-c">Objective-C (Clang 7.0.1)</option>
            <option value="67" mode="pascal">Pascal (FPC 3.0.4)</option>
            <option value="85" mode="perl">Perl (5.28.1)</option>
            <option value="68" mode="php">PHP (7.4.1)</option>
            <option value="43" mode="plaintext">Plain Text</option>
            <option value="70" mode="python">Python (2.7.17)</option>
            <option value="71" mode="python">Python (3.8.1)</option>
            <option value="1010" mode="python">Python for ML (3.7.3)</option>
            <option value="80" mode="r">R (4.0.0)</option>
            <option value="72" mode="ruby">Ruby (2.7.0)</option>
            <option value="73" mode="rust">Rust (1.40.0)</option>
            <option value="82" mode="sql">SQL (SQLite 3.27.2)</option>
            <option value="83" mode="swift">Swift (5.2.3)</option>
            <option value="74" mode="typescript">TypeScript (3.7.4)</option>
        </select>
        </div>
        <div class="form-field">
          <button>Join</button>
        </div>
      </form>
    </div>

    <script>
      let searchQuery = window.location.search.substring(1);
      if(searchQuery){
        let params = JSON.parse('{"' + decodeURI(searchQuery ).replace(/&/g, '","').replace(/\+/g, ' ').replace(/=/g, '":"') + '"}');
        document.querySelector('input[name="roomId"]').value = params.roomId;
        document.getElementById("select-language").value = params.lang;
      }else{
        console.log("no querie");
      }
    </script>
  </body>
</html>
